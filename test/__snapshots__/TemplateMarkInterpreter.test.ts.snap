// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`templatemark interpreter should fail to generate formula-invalid 1`] = `
[
  {
    "code": " THIS IS GARBAGE ",
    "errors": [
      {
        "category": 1,
        "character": 3,
        "code": 2304,
        "id": "err-2304-468-4",
        "length": 4,
        "line": 82,
        "renderedMessage": "Cannot find name 'THIS'.",
        "start": 1785,
      },
      {
        "category": 1,
        "character": 8,
        "code": 2304,
        "id": "err-2304-473-2",
        "length": 2,
        "line": 82,
        "renderedMessage": "Cannot find name 'IS'.",
        "start": 1790,
      },
      {
        "category": 1,
        "character": 11,
        "code": 2304,
        "id": "err-2304-476-7",
        "length": 7,
        "line": 82,
        "renderedMessage": "Cannot find name 'GARBAGE'.",
        "start": 1793,
      },
      {
        "category": 1,
        "character": 3,
        "code": 1435,
        "id": "err-1435-468-4",
        "length": 4,
        "line": 82,
        "renderedMessage": "Unknown keyword or identifier. Did you mean 'this'?",
        "start": 1785,
      },
      {
        "category": 1,
        "character": 8,
        "code": 1434,
        "id": "err-1434-473-2",
        "length": 2,
        "line": 82,
        "renderedMessage": "Unexpected keyword or identifier.",
        "start": 1790,
      },
    ],
    "nodeId": "formula_adef0feb9fc1b6e7513409c93d86aa4d9999d35608e1aaeecc07dca99bc591c8",
  },
]
`;

exports[`templatemark interpreter should fail to generate formula-no-method 1`] = `
[
  {
    "code": " return message.missing() ",
    "errors": [
      {
        "category": 1,
        "character": 18,
        "code": 2339,
        "id": "err-2339-483-7",
        "length": 7,
        "line": 82,
        "renderedMessage": "Property 'missing' does not exist on type 'string'.",
        "start": 1800,
      },
    ],
    "nodeId": "formula_4ef52e3adc6e5334e0925838eed0e51a372091d9b3a4499537ccf82fce5b1b25",
  },
]
`;

exports[`templatemark interpreter should fail to generate formula-optional-noguard 1`] = `
[
  {
    "code": " return message.length ",
    "errors": [
      {
        "category": 1,
        "character": 10,
        "code": 18048,
        "id": "err-18048-475-7",
        "length": 7,
        "line": 82,
        "renderedMessage": "'message' is possibly 'undefined'.",
        "start": 1793,
      },
    ],
    "nodeId": "formula_a3e0e90a2ad3601e1b208a0581e1ce6dfc5aab302d20cb2a0488d78e236096f7",
  },
]
`;

exports[`templatemark interpreter should fail to generate template-missing-field 1`] = `[TemplateException: Unknown property: missing File text/grammar.tem.md line -1 column -1]`;

exports[`templatemark interpreter should generate clause 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Address",
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "test@1.0.0.Address",
          "name": "address",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Street: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "String",
                  "name": "street",
                  "value": "1 Main Street",
                },
              ],
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate clause-optional 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Test Clause with Optional Field",
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "test@1.0.0.Address",
          "name": "address",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "No more content.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate conditional-variables 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Hello ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "name",
              "value": "Alice",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": ".",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Conditional",
              "isTrue": true,
              "name": "age",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "You are ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "Integer",
                  "name": "age",
                  "value": "30",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " years old.",
                },
              ],
              "whenFalse": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Age unknown.",
                },
              ],
              "whenTrue": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "You are ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "Integer",
                  "name": "age",
                  "value": "30",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " years old.",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Conditional",
              "isTrue": true,
              "name": "isActive",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Active user: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "String",
                  "name": "name",
                  "value": "Alice",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": ".",
                },
              ],
              "whenFalse": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Inactive.",
                },
              ],
              "whenTrue": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Active user: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "String",
                  "name": "name",
                  "value": "Alice",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": ".",
                },
              ],
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate formula-now 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Hello ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "message",
              "value": "World",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "! Today is ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Strong",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_f0bf5a79ebf5383c600fde8b5741509daa86e1c85d4f4572d5564ec65a1b8e3a",
                  "value": ""2023-03-17T00:00:00.000Z"",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": ".",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate full 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "1",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Welcome!",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Hello ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "firstName",
              "value": "Dan",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": " ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Tenzin-Isaac-Mia",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": " ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Conditional",
              "isTrue": true,
              "name": "lastName",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Mister",
                },
              ],
              "whenFalse": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Dude",
                },
              ],
              "whenTrue": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Mister",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "!",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Middle Names",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "this",
                      "value": "Tenzin",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "this",
                      "value": "Isaac",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "this",
                      "value": "Mia",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Middle names: ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Tenzin, Isaac, and Mia",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Address",
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "test@1.0.0.Address",
          "name": "address",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.List",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "Street: ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "street",
                          "value": "1 Main Street",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "City: ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "city",
                          "value": "Boston",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "ZIP: ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "zip",
                          "value": "12345",
                        },
                      ],
                    },
                  ],
                },
              ],
              "tight": "true",
              "type": "bullet",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Your city is: ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Emph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Strong",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "city",
                          "value": "Boston",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": ".",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Account Status",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Conditional",
              "isTrue": false,
              "name": "active",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your account has been deactivated.",
                },
              ],
              "whenFalse": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your account has been deactivated.",
                },
              ],
              "whenTrue": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your account is active.",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Thank you for visiting us ",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Strong",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                      "dependencies": [],
                      "name": "formula_53113a901ca88208df47bc83374866e8d497d84099c0f88123c918ff1960b17e",
                      "value": "66",
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " days ago.",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your last visit was: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                  "elementType": "DateTime",
                  "format": "MM/DD/YYYY",
                  "name": "lastVisit",
                  "value": "01/10/2023",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": ".",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Formula",
              "dependencies": [],
              "name": "formula_7841bd178366af21ea233d10968eaf538d12fb7a50cbaf9cbe1b51a00cb0f6a8",
              "value": ""[123 : Dan Selman][234 : Isaac Selman][456 : Tenzin Selman][789 : Mi-a Selman]"",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Orders",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Strong",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "sku",
                          "value": "WIDGET-2000",
                        },
                      ],
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " : ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Emph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "amount",
                          "value": "10",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Strong",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "sku",
                          "value": "DOODAH-X",
                        },
                      ],
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " : ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Emph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "amount",
                          "value": "3",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Optional",
              "elementType": "test@1.0.0.LoyaltyStatus",
              "hasSome": false,
              "name": "loyaltyStatus",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "You do not have a loyalty status.",
                },
              ],
              "whenNone": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "You do not have a loyalty status.",
                },
              ],
              "whenSome": [],
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "test@1.0.0.Preferences",
          "name": "preferences",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Heading",
              "level": "2",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Favorite Colors",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your favorite colors are: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_4b8f7e95470eda90057c4648aac4e4c7abb3f93559ed348246b6a15ec1fea473",
                  "value": ""RED and PINK"",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Image",
                  "destination": "https://www.litmus.com/wp-content/uploads/2021/02/motion-tween-example.gif",
                  "nodes": [],
                  "title": "",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.List",
              "delimiter": "period",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "this",
                          "value": "RED",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "this",
                          "value": "PINK",
                        },
                      ],
                    },
                  ],
                },
              ],
              "start": "1",
              "tight": "true",
              "type": "ordered",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Conditional",
                  "isTrue": true,
                  "name": "favoriteColors",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "You like pink!",
                    },
                  ],
                  "whenFalse": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Why don't you like PINK!",
                    },
                  ],
                  "whenTrue": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "You like pink!",
                    },
                  ],
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Dynamic Query of Clauses",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Onboarding Clauses",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_a8a1d7714d95baa82f730e0105d2f2d0a9fc25ee9b6055058cc09667c01c01ab",
                  "value": "[{"category":"onboarding","author":"Peter","body":"Legal stuff","risk":2.95}]",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Authored by ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "firstName",
              "value": "Dan",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_daca9cb2f5bc16b65f544e6f408c1e3121d50a3251ec4fbe2f27132818acc3d2",
                  "value": "[{"category":"reference","author":"Dan","body":"Dad jokes","risk":8.95},{"category":"reference","author":"Dan","body":"Programming for fun and profit","risk":1.95}]",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "High Risk",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_4c874b2977b5eef204e4987efc0a5594c7cce66403e54c17daa1e1c721d755a0",
                  "value": "[{"category":"reference","author":"Dan","body":"Dad jokes","risk":8.95},{"category":"offboarding","author":"Matt","body":"All goodness","risk":4.95}]",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Low Risk and authored by ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "firstName",
              "value": "Dan",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_646a6cadec2125e4fd9e4b756aac72bc618b528967f04d325b28a817774441dd",
                  "value": "[{"category":"reference","author":"Dan","body":"Programming for fun and profit","risk":1.95}]",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Done.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate headings 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "1",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Heading One",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Heading Two",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Heading Three",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "4",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Heading Four",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "5",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Heading Five",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "6",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Heading Six",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate helloformula 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Hello ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "message",
              "value": "World",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "! Your name is ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Strong",
              "nodes": [
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_a3e0e90a2ad3601e1b208a0581e1ce6dfc5aab302d20cb2a0488d78e236096f7",
                  "value": "5",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": " characters long.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate helloworld 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Hello ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "message",
              "value": "World",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": ".",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance_en 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "If your ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "CAR, ACCESSORIES, and SPARE_PARTS",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": " are ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "DAMAGED, LOST, or STOLEN",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": ", we will:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Pay up to ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 K",
                      "name": "limit",
                      "value": "1,500.00 €",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " towards the cost of ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.EnumVariable",
                      "elementType": "com.acme.insurance.auto@1.0.0.BenefitType",
                      "enumValues": [
                        "REPAIRING",
                        "REPLACING",
                      ],
                      "name": "benefitType",
                      "value": "REPAIRING",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " the damages",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Pay up to ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 K",
                      "name": "limit",
                      "value": "500.00 €",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " towards the cost of ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.EnumVariable",
                      "elementType": "com.acme.insurance.auto@1.0.0.BenefitType",
                      "enumValues": [
                        "REPAIRING",
                        "REPLACING",
                      ],
                      "name": "benefitType",
                      "value": "REPLACING",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " the damages",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance_fr 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Si votre ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "CAR, ACCESSORIES et SPARE_PARTS",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": " sont ",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "DAMAGED, LOST ou STOLEN",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": ", nous :",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Payer jusqu'à ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0.0,00 K",
                      "name": "limit",
                      "value": "1.500,00 €",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " pour les frais de ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.EnumVariable",
                      "elementType": "com.acme.insurance.auto@1.0.0.BenefitType",
                      "enumValues": [
                        "REPAIRING",
                        "REPLACING",
                      ],
                      "name": "benefitType",
                      "value": "REPAIRING",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " des dommages",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Payer jusqu'à ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0.0,00 K",
                      "name": "limit",
                      "value": "500,00 €",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " pour les frais de ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.EnumVariable",
                      "elementType": "com.acme.insurance.auto@1.0.0.BenefitType",
                      "enumValues": [
                        "REPAIRING",
                        "REPLACING",
                      ],
                      "name": "benefitType",
                      "value": "REPLACING",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " des dommages",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-acquisitions 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Acquisitions",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Notwithstanding condition E1 (Alteration of Risk), this Policy shall apply automatically to any new acquisition or newly formed subsidiary or associated company (but only where indemnity is already provided under this Policy for associated companies) by an Insured company during the Period of Insurance, provided that:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "the Insured notifies the Insurer in writing:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "immediately for new acquisitions or creations where turnover exceeds ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "turnoverLimit",
                      "value": "250,000.00 GBP",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " or ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "Integer",
                      "name": "turnoverPercentage",
                      "value": "50",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "% of total group turnover declared at inception of this Policy, whichever is the greater;",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "within ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "Integer",
                      "name": "newAcquisitionsDays",
                      "value": "30",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " days for new acquisitions or creations where turnover exceeds ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "newAcquisitionsTurnover",
                      "value": "250,000.00 GBP",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " or ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "Integer",
                      "name": "newAcquisitionsGroupTurnoverPercentage",
                      "value": "15",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "% of total group turnover declared at inception of this Policy, whichever is the greater;",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "within ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "Integer",
                      "name": "otherNewAcquisitionsDays",
                      "value": "90",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " days for all other new acquisitions or creations; or",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "at the beginning of any new Period of Insurance, if this is earlier than above.",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "the turnover in respect of such new acquisition or creation is declared, and additional premium is paid, from the time of acquisition or creation in proportion to the total turnover declared at inception of the Period of Insurance.",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "where such new acquisition or creation has activities representing a material alteration to the Business or is reasonably expected to increase the risk by means of frequency or severity of claims, the Insurer reserves the right to determine specific rates and terms and conditions for that new acquisition or creation.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-deductible 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Deductible",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Other than as stated below the Deductible shall be as follows:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "GBP XXXX any one Event",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Under Data Protection Extension C9 the Deductible shall be as follows",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "false",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "10% or GBP XXXX each and every claimant, whichever is the greater.",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Under Legionella Extension C15 the Deductible shall be as follows",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "10% or GBP 5,000 of each and every Event, whichever is the greater.",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Only one Deductible shall apply in respect of any one Event, and this shall be the highest applicable Deductible stated above.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-insuring-clause 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Insuring Clause",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "The Insurer will provide indemnity to the Insured:",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "against legal liability for claims for Damages in respect of:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Physical Injury to any person;",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "loss of or damage to Property;",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "obstruction, nuisance, trespass, loss of amenity or interference with any right of way, air, light or water or other easement",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Physical Injury means;",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Bodily Injury;",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "false arrest, invasion of the right of privacy, wrongful detention, false imprisonment, false eviction, harassment, discrimination, malicious prosecution;",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "assault and battery not committed by or at the direction of the Insured unless committed for the purpose of preventing or eliminating danger to persons or Property.",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Property means",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "physical property and does not include Data.",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-period 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Period of Insurance",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "From: ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
              "elementType": "DateTime",
              "format": "DD MMMM YYYY",
              "name": "from",
              "value": "23 May 2018",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "To:	",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
              "elementType": "DateTime",
              "format": "DD MMMM YYYY",
              "name": "to",
              "value": "01 January 2021",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "both dates inclusive, local standard time at the address of the Insured as stated above.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-premium 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Premium in Full – Non-adjustable",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Gross Premium: ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
              "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
              "format": "0,0.00 CCC",
              "name": "gross",
              "value": "75,000.00 GBP",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "less Commission: ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
              "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
              "format": "0,0.00 CCC",
              "name": "lessCommission",
              "value": "5,000.00 GBP",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Net Premium:  ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
              "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
              "format": "0,0.00 CCC",
              "name": "netPremium",
              "value": "50,000.00 GBP",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "plus, taxes of  ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
              "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
              "format": "0,0.00 CCC",
              "name": "taxes",
              "value": "20,000.00 GBP",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "which the Insured agrees to pay as consideration for this Policy.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-retroactive-date 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Retroactive Date",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "The Retroactive Date for this Policy shall be follows:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Data Protection Extension C9: ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "DateTime",
                      "format": "DD MMMM YYYY",
                      "name": "dataProtectionExtension",
                      "value": "23 May 2018",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Legionella Extension C15: ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "DateTime",
                      "format": "DD MMMM YYYY",
                      "name": "legionellaExtension",
                      "value": "01 January 2021",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate insurance-sub-limits-liability 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Sub-Limits of Indemnity",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "The Sub-Limits of Indemnity for this Policy (subject to reduction by the applicable Deductible) shall be as follows:",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "The maximum liability of the Insurer under Corporate Manslaughter and Corporate Homicide Act 2007 – Defence Costs extension C6 shall not exceed:",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "corporateManslaughterMaximumLiability",
                      "value": "500,000.00 GBP",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " in the aggregate during any one Period of Insurance.",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "The maximum liability of the Insurer under Data Protection Act extension C9 shall not exceed:",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "dataProtectionMaximumLiability",
                      "value": "50,000.00 GBP",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " in the aggregate during any one Period of Insurance.",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "The maximum liability of the Insurer under Legionella Extension C15 shall not exceed:",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "legionellaMaximumLiability",
                      "value": "500,000.00 GBP",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " in the aggregate during any one Period of Insurance.",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "The maximum liability of the Insurer under Pollution Clean Up Costs extension C17 shall not exceed:",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "pollutionMaximumLiability",
                      "value": "500,000.00 GBP",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " in the aggregate during any one Period of Insurance.",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "false",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "The Sub-Limits of Indemnity form part of the relevant Limit of Indemnity specified above and do not apply in addition to it.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate join 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "en Locale",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Style",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Narrow: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, and SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Short: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, & SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Disjunction",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, or SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Unit",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "en-GB Locale",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Style",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Narrow: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES and SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Short: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES and SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Disjunction",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES or SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Unit",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "fr Locale",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Style",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Narrow: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES, SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES et SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Short: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES et SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Disjunction",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES ou SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Unit",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Long: ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "CAR, ACCESSORIES et SPARE_PARTS",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate list 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Middle Names",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "this",
                      "value": "Tenzin",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "this",
                      "value": "Isaac",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "this",
                      "value": "Mia",
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate optional 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Optional",
              "elementType": "test@1.0.0.LoyaltyStatus",
              "hasSome": false,
              "name": "loyaltyStatus",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "You do not have a loyalty status.",
                },
              ],
              "whenNone": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "You do not have a loyalty status.",
                },
              ],
              "whenSome": [],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Done.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate optional_comprehensive 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "2",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Comprehensive Optional Blocks Test",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Scalar Optional Cases",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "delimiter": "period",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Integer: ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "Integer",
                      "hasSome": true,
                      "name": "age",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "Age is ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "age",
                          "value": "30",
                        },
                      ],
                      "whenNone": [],
                      "whenSome": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "Age is ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "age",
                          "value": "30",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "String: ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "String",
                      "hasSome": false,
                      "name": "middleName",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "No middle name",
                        },
                      ],
                      "whenNone": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "No middle name",
                        },
                      ],
                      "whenSome": [],
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Boolean: ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "Boolean",
                      "hasSome": true,
                      "name": "active",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "Status: ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Boolean",
                          "name": "active",
                          "value": "true",
                        },
                      ],
                      "whenNone": [],
                      "whenSome": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "Status: ",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Boolean",
                          "name": "active",
                          "value": "true",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
          "start": "1",
          "tight": "true",
          "type": "ordered",
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Object Optional Cases",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Optional",
              "elementType": "test@1.0.0.Address",
              "hasSome": true,
              "name": "address",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Address: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "String",
                  "name": "street",
                  "value": "123 Main St",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": ", ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "String",
                  "name": "city",
                  "value": "Boston",
                },
              ],
              "whenNone": [],
              "whenSome": [],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Nested Optional Within Optional",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Optional",
              "elementType": "test@1.0.0.Person",
              "hasSome": true,
              "name": "person",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Person: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "String",
                  "name": "name",
                  "value": "Alice",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                  "elementType": "Integer",
                  "hasSome": true,
                  "name": "age",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "(",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "Integer",
                      "name": "age",
                      "value": "25",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " years old)",
                    },
                  ],
                  "whenNone": [],
                  "whenSome": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "(",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "Integer",
                      "name": "age",
                      "value": "25",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " years old)",
                    },
                  ],
                },
              ],
              "whenNone": [],
              "whenSome": [],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Formatted Optional",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Optional",
              "elementType": "DateTime",
              "hasSome": true,
              "name": "lastVisit",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Last visit: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                  "elementType": "DateTime",
                  "format": "MMMM DD, YYYY",
                  "name": "lastVisit",
                  "value": "December 01, 2023",
                },
              ],
              "whenNone": [],
              "whenSome": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Last visit: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                  "elementType": "DateTime",
                  "format": "MMMM DD, YYYY",
                  "name": "lastVisit",
                  "value": "December 01, 2023",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Complete.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate optional-nested 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "1",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Optional Test",
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "org.example.ap2.mandate@1.1.1.AP2MandateData",
          "name": "mandate",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Strong",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "Mandate ID:",
                        },
                      ],
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "mandateId",
                      "value": "mandate-2025-10-A2B-001",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Heading",
              "level": "2",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Parties",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "idKey",
                      "value": "id2",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "org.example.ap2.mandate@1.1.1.PedUri",
                      "hasSome": true,
                      "name": "pedUri",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "{{pedUri.uri}}uri",
                        },
                      ],
                      "whenNone": [],
                      "whenSome": [],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "idKey",
                      "value": "id2",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "uri:",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "uri",
                          "value": "http://someurl.com?a=1",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "org.example.ap2.mandate@1.1.1.PedUri",
                      "hasSome": true,
                      "name": "pedUri",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "text",
                        },
                      ],
                      "whenNone": [],
                      "whenSome": [],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "idKey",
                      "value": "id2",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "org.example.ap2.mandate@1.1.1.PedUri",
                      "hasSome": true,
                      "name": "pedUri",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "String",
                          "name": "uri",
                          "value": "http://someurl.com?a=1",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "uri",
                        },
                      ],
                      "whenNone": [],
                      "whenSome": [],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "idKey",
                      "value": "id2",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Optional",
                      "elementType": "org.example.ap2.mandate@1.1.1.PedUri",
                      "hasSome": true,
                      "name": "pedUri",
                      "nodes": [
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "{{this.uri}}uri",
                        },
                      ],
                      "whenNone": [],
                      "whenSome": [],
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Strong",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Payee:",
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                      "dependencies": [],
                      "name": "formula_7f77a1fc3bf46ee7bd9f1eee1c8967f3d0ccaeddc878a7673b584fdc4f00f042",
                      "value": ""- PED: http://someurl.com?a=1"",
                    },
                  ],
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "A general sample that uses a range of features",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Welcome ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "name",
              "value": "John Doe",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "!",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Image",
              "destination": "https://avatars.githubusercontent.com/u/29445438?s=64",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "AP Logo",
                },
              ],
              "title": "",
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "org.example.ap2.mandate@1.1.1.Address",
          "name": "address",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Heading",
              "level": "4",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Address",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "line1",
                      "value": "1 Main Street",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ",",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "city",
                      "value": "Boson",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ", ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "state",
                      "value": "MA",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ",",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "country",
                      "value": "USA",
                    },
                  ],
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "You are ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Emph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "age",
                          "value": "42",
                        },
                      ],
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " years old",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Your monthly salary is ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "salary",
                      "value": "1,500.00 EUR",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Your favorite colours are ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "red, green, and blue",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "org.example.ap2.mandate@1.1.1.Order",
          "name": "order",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Heading",
              "level": "2",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Orders",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your last order was placed ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                  "elementType": "DateTime",
                  "format": "D MMMM YYYY",
                  "name": "createdAt",
                  "value": "1 May 2023",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " (",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_87067c9bed3b3c592c46445b8d60c223615c5dbc49d2ab1bacecb1e78350c991",
                  "value": "-44",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " days ago).",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.List",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "quantity",
                          "value": "3",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "x ",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Emph",
                          "nodes": [
                            {
                              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                              "elementType": "String",
                              "name": "sku",
                              "value": "ABC-123",
                            },
                          ],
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": " @ £",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                          "elementType": "Double",
                          "format": "0,0.00",
                          "name": "price",
                          "value": "29.99",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "quantity",
                          "value": "5",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "x ",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Emph",
                          "nodes": [
                            {
                              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                              "elementType": "String",
                              "name": "sku",
                              "value": "DEF-456",
                            },
                          ],
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": " @ £",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                          "elementType": "Double",
                          "format": "0,0.00",
                          "name": "price",
                          "value": "19.99",
                        },
                      ],
                    },
                  ],
                },
              ],
              "tight": "true",
              "type": "bullet",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Order total: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_a6c3eb22d929c718c1ff356e4980b97a736d405a04fbb541ba5db1728cb3a579",
                  "value": ""£189.92"",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Verification",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Checking logic for top-level optionals:",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Softbreak",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Optional",
              "elementType": "Integer",
              "hasSome": true,
              "name": "age",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Age is provided as ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "Integer",
                  "name": "age",
                  "value": "42",
                },
              ],
              "whenNone": [],
              "whenSome": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Age is provided as ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                  "elementType": "Integer",
                  "name": "age",
                  "value": "42",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Thank you.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate paragraph 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "This is some text.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;

exports[`templatemark interpreter should generate playground 1`] = `
{
  "$class": "org.accordproject.commonmark@0.5.0.Document",
  "nodes": [
    {
      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
      "nodes": [
        {
          "$class": "org.accordproject.commonmark@0.5.0.Heading",
          "level": "3",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Welcome ",
            },
            {
              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
              "elementType": "String",
              "name": "name",
              "value": "John Doe",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "!",
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Image",
              "destination": "https://avatars.githubusercontent.com/u/29445438?s=64",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "AP Logo",
                },
              ],
              "title": "",
            },
          ],
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "hello@1.0.0.Address",
          "name": "address",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Heading",
              "level": "4",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Address",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.BlockQuote",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "line1",
                      "value": "1 Main Street",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ",",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "city",
                      "value": "Boson",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ", ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "state",
                      "value": "MA",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ",",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Linebreak",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                      "elementType": "String",
                      "name": "country",
                      "value": "USA",
                    },
                  ],
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.List",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "You are ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Emph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "age",
                          "value": "42",
                        },
                      ],
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": " (",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "Integer",
                      "format": "text",
                      "name": "age",
                      "value": "Forty Two",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": ") years old",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Your monthly salary is ",
                    },
                    {
                      "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                      "elementType": "org.accordproject.money@0.3.0.MonetaryAmount",
                      "format": "0,0.00 CCC",
                      "name": "salary",
                      "value": "1,500.00 EUR",
                    },
                  ],
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Item",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "Your favorite colours are ",
                    },
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Text",
                      "text": "red, green, and blue",
                    },
                  ],
                },
              ],
            },
          ],
          "tight": "true",
          "type": "bullet",
        },
        {
          "$class": "org.accordproject.ciceromark@0.6.0.Clause",
          "elementType": "hello@1.0.0.Order",
          "name": "order",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Heading",
              "level": "2",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Orders",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Your last order was placed ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                  "elementType": "DateTime",
                  "format": "D MMMM YYYY",
                  "name": "createdAt",
                  "value": "1 May 2023",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " (",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_87067c9bed3b3c592c46445b8d60c223615c5dbc49d2ab1bacecb1e78350c991",
                  "value": "-45",
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": " days ago).",
                },
              ],
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.List",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "quantity",
                          "value": "3",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "x ",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Emph",
                          "nodes": [
                            {
                              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                              "elementType": "String",
                              "name": "sku",
                              "value": "ABC-123",
                            },
                          ],
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": " @ £",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                          "elementType": "Double",
                          "format": "0,0.00",
                          "name": "price",
                          "value": "29.99",
                        },
                      ],
                    },
                  ],
                },
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Item",
                  "nodes": [
                    {
                      "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
                      "nodes": [
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                          "elementType": "Integer",
                          "name": "quantity",
                          "value": "5",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": "x ",
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Emph",
                          "nodes": [
                            {
                              "$class": "org.accordproject.ciceromark@0.6.0.Variable",
                              "elementType": "String",
                              "name": "sku",
                              "value": "DEF-456",
                            },
                          ],
                        },
                        {
                          "$class": "org.accordproject.commonmark@0.5.0.Text",
                          "text": " @ £",
                        },
                        {
                          "$class": "org.accordproject.ciceromark@0.6.0.FormattedVariable",
                          "elementType": "Double",
                          "format": "0,0.00",
                          "name": "price",
                          "value": "19.99",
                        },
                      ],
                    },
                  ],
                },
              ],
              "tight": "true",
              "type": "bullet",
            },
            {
              "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
              "nodes": [
                {
                  "$class": "org.accordproject.commonmark@0.5.0.Text",
                  "text": "Order total: ",
                },
                {
                  "$class": "org.accordproject.ciceromark@0.6.0.Formula",
                  "dependencies": [],
                  "name": "formula_a6c3eb22d929c718c1ff356e4980b97a736d405a04fbb541ba5db1728cb3a579",
                  "value": ""£189.92"",
                },
              ],
            },
          ],
        },
        {
          "$class": "org.accordproject.commonmark@0.5.0.Paragraph",
          "nodes": [
            {
              "$class": "org.accordproject.commonmark@0.5.0.Text",
              "text": "Thank you.",
            },
          ],
        },
      ],
    },
  ],
  "xmlns": "http://commonmark.org/xml/1.0",
}
`;
