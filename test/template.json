{
    "$class": "org.accordproject.commonmark.Document",
    "xmlns": "http://commonmark.org/xml/1.0",
    "nodes": [
        {
            "$class": "org.accordproject.templatemark.ClauseDefinition",
            "name": "top",
            "elementType": "test@1.0.0.TemplateData",
            "decorators": [
                {
                    "$class": "concerto.metamodel.Decorator",
                    "name": "template",
                    "arguments": []
                }
            ],
            "nodes": [
                {
                    "$class": "org.accordproject.commonmark.Paragraph",
                    "nodes": [
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "Hello "
                        },
                        {
                            "$class": "org.accordproject.templatemark.VariableDefinition",
                            "name": "firstName",
                            "elementType": "String"
                        },
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": " "
                        },
                        {
                            "$class": "org.accordproject.templatemark.JoinDefinition",
                            "separator": "-",
                            "name": "middleNames",
                            "nodes": [
                                {
                                    "$class": "org.accordproject.templatemark.VariableDefinition",
                                    "name": "this",
                                    "elementType": "String"
                                }
                            ]
                        },
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": " "
                        },
                        {
                            "$class": "org.accordproject.templatemark.ConditionalDefinition",
                            "whenTrue": [
                                {
                                    "$class": "org.accordproject.commonmark.Text",
                                    "text": "Mister"
                                }
                            ],
                            "whenFalse": [
                                {
                                    "$class": "org.accordproject.commonmark.Text",
                                    "text": "Dude"
                                }
                            ],
                            "condition": "lastName.startsWith('S')",
                            "dependencies": [
                                "lastName"
                            ],
                            "name": "if"
                        },
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "!"
                        }
                    ]
                },
                {
                    "$class": "org.accordproject.commonmark.Paragraph",
                    "nodes": [
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "Your city is: "
                        },
                        {
                            "$class": "org.accordproject.templatemark.WithDefinition",
                            "name": "address",
                            "elementType": "test@1.0.0.Address",
                            "nodes": [
                                {
                                    "$class": "org.accordproject.templatemark.VariableDefinition",
                                    "name": "city",
                                    "elementType": "String"
                                }
                            ]
                        },
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "."
                        }
                    ]
                },
                {
                    "$class": "org.accordproject.commonmark.Paragraph",
                    "nodes": [
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "Thank you for visiting us "
                        },
                        {
                            "$class": "org.accordproject.templatemark.FormulaDefinition",
                            "dependencies": [
                                "now",
                                "lastVisit"
                            ],
                            "code": " return now.diff(lastVisit,'day') ",
                            "name": "formula_53113a901ca88208df47bc83374866e8d497d84099c0f88123c918ff1960b17e"
                        },
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": " days ago."
                        }
                    ]
                },
                {
                    "$class": "org.accordproject.commonmark.Heading",
                    "level": "2",
                    "nodes": [
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "Orders"
                        }
                    ]
                },
                {
                    "$class": "org.accordproject.templatemark.ListBlockDefinition",
                    "type": "bullet",
                    "tight": "true",
                    "name": "orders",
                    "elementType": "test@1.0.0.Order",
                    "nodes": [
                        {
                            "$class": "org.accordproject.commonmark.List",
                            "type": "bullet",
                            "tight": "true",
                            "nodes": [
                                {
                                    "$class": "org.accordproject.commonmark.Item",
                                    "nodes": [
                                        {
                                            "$class": "org.accordproject.commonmark.Paragraph",
                                            "nodes": [
                                                {
                                                    "$class": "org.accordproject.templatemark.VariableDefinition",
                                                    "name": "sku",
                                                    "elementType": "String"
                                                },
                                                {
                                                    "$class": "org.accordproject.commonmark.Text",
                                                    "text": " : "
                                                },
                                                {
                                                    "$class": "org.accordproject.templatemark.VariableDefinition",
                                                    "name": "amount",
                                                    "elementType": "Integer"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "$class": "org.accordproject.commonmark.Paragraph",
                    "nodes": [
                        {
                            "$class": "org.accordproject.commonmark.Text",
                            "text": "Done."
                        }
                    ]
                }
            ]
        }
    ]
}