{"$class":"org.accordproject.commonmark.Document","xmlns":"http://commonmark.org/xml/1.0","nodes":[{"$class":"org.accordproject.templatemark.ClauseDefinition","name":"top","elementType":"test@1.0.0.TemplateData","decorators":[{"$class":"concerto.metamodel.Decorator","name":"template","arguments":[]}],"nodes":[{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.commonmark.Text","text":"Hello "},{"$class":"org.accordproject.templatemark.VariableDefinition","name":"firstName","elementType":"String"},{"$class":"org.accordproject.commonmark.Text","text":" "},{"$class":"org.accordproject.templatemark.JoinDefinition","separator":"-","name":"middleNames","nodes":[{"$class":"org.accordproject.templatemark.VariableDefinition","name":"this","elementType":"String"}]},{"$class":"org.accordproject.commonmark.Text","text":" "},{"$class":"org.accordproject.templatemark.ConditionalDefinition","whenTrue":[{"$class":"org.accordproject.commonmark.Text","text":"Mister"}],"whenFalse":[{"$class":"org.accordproject.commonmark.Text","text":"Dude"}],"condition":"lastName.startsWith('S')","dependencies":["lastName"],"name":"if"},{"$class":"org.accordproject.commonmark.Text","text":"!"}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.commonmark.Text","text":"Your city is: "},{"$class":"org.accordproject.templatemark.WithDefinition","name":"address","elementType":"test@1.0.0.Address","nodes":[{"$class":"org.accordproject.templatemark.VariableDefinition","name":"city","elementType":"String"}]},{"$class":"org.accordproject.commonmark.Text","text":"."}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.templatemark.ConditionalDefinition","whenTrue":[{"$class":"org.accordproject.commonmark.Text","text":"Your account is active."}],"whenFalse":[{"$class":"org.accordproject.commonmark.Text","text":"Your account has been deactivated."}],"dependencies":[],"name":"active"}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.commonmark.Text","text":"Thank you for visiting us "},{"$class":"org.accordproject.templatemark.FormulaDefinition","dependencies":["now","lastVisit"],"code":" return now.diff(lastVisit,'day') ","name":"formula_53113a901ca88208df47bc83374866e8d497d84099c0f88123c918ff1960b17e"},{"$class":"org.accordproject.commonmark.Text","text":" days ago."}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.commonmark.Text","text":"Your last visit was: "},{"$class":"org.accordproject.commonmark.Emph","nodes":[{"$class":"org.accordproject.templatemark.FormattedVariableDefinition","format":"DD/MM/YYYY","name":"lastVisit","elementType":"DateTime"}]},{"$class":"org.accordproject.commonmark.Text","text":"."}]},{"$class":"org.accordproject.commonmark.Heading","level":"2","nodes":[{"$class":"org.accordproject.commonmark.Text","text":"Orders"}]},{"$class":"org.accordproject.templatemark.ListBlockDefinition","type":"ordered","tight":"true","start":"1","delimiter":"period","name":"orders","elementType":"test@1.0.0.Order","nodes":[{"$class":"org.accordproject.commonmark.List","type":"bullet","tight":"true","nodes":[{"$class":"org.accordproject.commonmark.Item","nodes":[{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.templatemark.VariableDefinition","name":"sku","elementType":"String"},{"$class":"org.accordproject.commonmark.Text","text":" : "},{"$class":"org.accordproject.templatemark.VariableDefinition","name":"amount","elementType":"Integer"}]}]}]}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.templatemark.OptionalDefinition","whenSome":[{"$class":"org.accordproject.commonmark.Text","text":"Your loyalty status: "},{"$class":"org.accordproject.templatemark.VariableDefinition","name":"level","elementType":"String"}],"whenNone":[{"$class":"org.accordproject.commonmark.Text","text":"You do not have a loyalty status."}],"name":"loyaltyStatus","elementType":"test@1.0.0.LoyaltyStatus"}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.templatemark.OptionalDefinition","whenSome":[{"$class":"org.accordproject.commonmark.Text","text":"## Favorite Colors"}],"whenNone":[],"name":"favoriteColors","elementType":"test@1.0.0.Color"}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.templatemark.FormulaDefinition","dependencies":["favoriteColors","favoriteColors"],"code":" return favoriteColors ? favoriteColors.join(',') : '' ","name":"formula_f1f9764275f754bc1d83edcc828097ba3cdca9664ea5c107e0717cd1f6adc1bc"}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.templatemark.ConditionalDefinition","whenTrue":[{"$class":"org.accordproject.commonmark.Text","text":"You like PINK!"}],"whenFalse":[{"$class":"org.accordproject.commonmark.Text","text":"Why don't you like PINK?"}],"condition":"favoriteColors && favoriteColors.indexOf('PINK') >= 0","dependencies":["favoriteColors","favoriteColors"],"name":"if"}]},{"$class":"org.accordproject.commonmark.Paragraph","nodes":[{"$class":"org.accordproject.commonmark.Text","text":"Done."}]}]}]}